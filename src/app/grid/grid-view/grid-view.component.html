<div
    #containerEl
    style="
        display: grid;
        height: 100%;
        grid-template-rows: max-content 1fr;
        grid-template-columns: max-content 1fr;
    "
>
    <!-- Top-left corner -->
    <div></div>

    <!-- Column titles -->
    <div [style.overflow]="'visible'" [style.z-index]="-1">
        <div *ngIf="gridView$ | async as grid" [style.display]="'flex'">
            <div
                *ngFor="let col of grid.cols"
                [style.width.px]="col.dim * scale"
            >
                {{ col.title }}
            </div>
        </div>
    </div>

    <!-- Row Titles -->
    <div [style.overflow]="'visible'" [style.z-index]="-1">
        <div *ngIf="gridView$ | async as grid">
            <div
                *ngFor="let row of grid.rows"
                [style.height.px]="row.dim * scale"
            >
                {{ row.title }}
            </div>
        </div>
    </div>

    <!-- Images -->
    <svg
        style="min-height: 0; min-width: 0"
        [style.overflow]="'visible'"
        [style.z-index]="-1"
        #imageGrid
    >
        <g *ngIf="gridView$ | async as grid">
            <g *ngFor="let row of grid.rows; index as r">
                <g *ngFor="let col of grid.cols; index as c">
                    <image
                        *ngLet="grid.cellAt(r, c) as cell"
                        [attr.height]="cell.height"
                        [attr.width]="cell.width"
                        [attr.x]="cell.x"
                        [attr.y]="cell.y"
                        [attr.href]="cell.image.data"
                    />
                </g>
            </g>
        </g>
    </svg>
</div>
